
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Models
{
    public class BEG_FPG_PESSOA_ESTAGIO
    {

        [NotMapped]
        public string Trigger_DIE_TRG_BIU_PESSOA_ESTAGIO { get; set; } = `{"triggering_event":"INSERT OR UPDATE","trigger_body":"declare\n\n  V_DIA    number := 0;\n  V_ANO    number := 0;\n  V_MES    number := 0;\n  V_MES1   number := 0;\n  V_MES2   number := 0;\n  V_MES3   number := 0;\n  V_MES4   number := 0;\n  V_VALIDO char := null;\n\nbegin\n\n  if :new.AD_ORG_ID = 0 then\n  \n    RAISE_APPLICATION_ERROR(-20001,\n                            'Informe a Filial onde o estagiário será alocado!');\n  end if;\n\n  select BEG_FNC_VALIDA_CNPJ(:new.CNPJ_INSTITUICAO)\n    into V_VALIDO\n    from DUAL;\n\n  if V_VALIDO = 'F' then\n  \n    RAISE_APPLICATION_ERROR(-20002,\n                            'O CNPJ da Insituição informado é inválido!');\n  end if;\n\n  if :new.DT_FINAL <= :new.DT_INICIO then\n  \n    RAISE_APPLICATION_ERROR(-20003,\n                            'A Data Final do estágio deve ser maior que a Data de Início!');\n  end if;\n\n  if :new.HORA_FINAL1 <= :new.HORA_INICIAL1 then\n  \n    RAISE_APPLICATION_ERROR(-20004,\n                            'A Hora de Saída 1 deve ser maior que a Hora de Entrada 1!');\n  end if;\n\n  if :new.TURNO_INTEGRAL = 'Y' then\n  \n    if :new.HORA_INICIAL2 <= :new.HORA_FINAL1 then\n    \n      RAISE_APPLICATION_ERROR(-20005,\n                              'A Hora de Entrada 2 deve ser maior que a Hora de Saída 1!');\n    end if;\n  \n    if :new.HORA_FINAL2 <= :new.HORA_INICIAL2\n       or (:new.HORA_FINAL2 is null)\n       or (:new.HORA_INICIAL2 is null) then\n    \n      RAISE_APPLICATION_ERROR(-20006,\n                              'A Hora de Saída 2 informada deve ser maior que a Hora de Entrada 2!');\n    end if;\n  \n  end if;\n\n  if :new.CARGA_HORARIA_SEMANAL = 0\n     or :new.CARGA_HORARIA_MENSAL = 0 then\n  \n    RAISE_APPLICATION_ERROR(-20007,\n                            'Você deve informar a Carga Horária Mensal e Semanal!');\n  end if;\n\n  if :new.CARGA_HORARIA_MENSAL <= :new.CARGA_HORARIA_SEMANAL then\n  \n    RAISE_APPLICATION_ERROR(-20008,\n                            'A Carga Horária Mensal deve ser maior que a Carga Horária Semanal!');\n  end if;\n\n  if :new.DT_DESLIGAMENTO is not null\n     and :new.BEG_FPG_DESLIGTO_ESTAGIO_ID is null then\n  \n    RAISE_APPLICATION_ERROR(-20009,\n                            'O Motivo do Desligamento deve ser informado!');\n  end if;\n\n  BEG_PCK_DESENVOLVEDOR.DIE_PRC_CALCULA_IDADE(:new.DT_FINAL,\n                                              :new.DT_INICIO,\n                                              V_ANO,\n                                              V_MES,\n                                              V_DIA);\n  V_MES1 := V_MES + (V_ANO * 12);\n\n  if V_MES1 < 6 then\n  \n    RAISE_APPLICATION_ERROR(-20010,\n                            'O Contrato deve ter no mínimo 6 meses de duração!');\n  end if;\n\n  if :new.DT_DESLIGAMENTO <= :new.DT_INICIO then\n  \n    RAISE_APPLICATION_ERROR(-20011,\n                            'A Data de Desligamento deve ser maior que a Data de Início do Contrato!');\n  end if;\n\n  if :new.PRORROGACAO_1 = 'Y' then\n  \n    if :new.DT_DESLIGAMENTO <= :new.DT_INICIO1 then\n    \n      RAISE_APPLICATION_ERROR(-20012,\n                              'A Data de Desligamento deve ser maior que a Data da 1ª Prorrogação!');\n    end if;\n  \n    if :new.DT_INICIO1 <= :new.DT_FINAL then\n    \n      RAISE_APPLICATION_ERROR(-20013,\n                              'A Data de Ínício da 1ª Prorrogação do estágio deve ser maior que a Data Final do 1º Contrato!');\n    end if;\n  \n    if :new.DT_FINAL1 <= :new.DT_INICIO1\n       or :new.DT_INICIO1 is null\n       or (:new.DT_INICIO1 is not null and :new.DT_FINAL1 is null) then\n    \n      RAISE_APPLICATION_ERROR(-20014,\n                              'Verifique as datas da 1ª Prorrogação do estágio!');\n    end if;\n  \n    BEG_PCK_DESENVOLVEDOR.DIE_PRC_CALCULA_IDADE(:new.DT_FINAL1,\n                                                :new.DT_INICIO1,\n                                                V_ANO,\n                                                V_MES,\n                                                V_DIA);\n    V_MES2 := V_MES + (V_ANO * 12);\n  \n    if V_MES < 6 then\n    \n      RAISE_APPLICATION_ERROR(-20015,\n                              'A Prorrogação deve ter no mínimo 6 meses de duração!');\n    end if;\n  \n  end if;\n\n  if :new.PRORROGACAO_2 = 'Y' then\n  \n    if :new.DT_DESLIGAMENTO <= :new.DT_INICIO2 then\n    \n      RAISE_APPLICATION_ERROR(-20016,\n                              'A Data de Desligamento deve ser maior que a Data da 2ª Prorrogação!');\n    end if;\n  \n    if :new.DT_INICIO2 <= :new.DT_FINAL1\n       or :new.DT_INICIO2 <= :new.DT_FINAL then\n    \n      RAISE_APPLICATION_ERROR(-20017,\n                              'A Data de Ínício da 2ª Prorrogação do estágio deve ser maior que a Data Final da 1ª Prorrogação!');\n    end if;\n  \n    if :new.DT_FINAL2 <= :new.DT_INICIO2\n       or :new.DT_INICIO2 is null\n       or (:new.DT_INICIO2 is not null and :new.DT_FINAL2 is null) then\n    \n      RAISE_APPLICATION_ERROR(-20018,\n                              'Verifique as datas da 2ª Prorrogação do estágio!');\n    end if;\n  \n    BEG_PCK_DESENVOLVEDOR.DIE_PRC_CALCULA_IDADE(:new.DT_FINAL2,\n                                                :new.DT_INICIO2,\n                                                V_ANO,\n                                                V_MES,\n                                                V_DIA);\n  \n    V_MES3 := V_MES + (V_ANO * 12);\n  \n    if V_MES < 6 then\n    \n      RAISE_APPLICATION_ERROR(-20019,\n                              'A Prorrogação deve ter no mínimo 6 meses de duração!');\n    end if;\n  \n  end if;\n\n  if :new.PRORROGACAO_3 = 'Y' then\n  \n    if :new.DT_DESLIGAMENTO <= :new.DT_INICIO3 then\n    \n      RAISE_APPLICATION_ERROR(-20020,\n                              'A Data de Desligamento deve ser maior que a Data da 3ª Prorrogação!');\n    end if;\n  \n    if :new.DT_INICIO3 <= :new.DT_FINAL2\n       or :new.DT_INICIO3 <= :new.DT_FINAL then\n    \n      RAISE_APPLICATION_ERROR(-20021,\n                              'A Data de Ínício da 3ª Prorrogação do estágio deve ser maior que a Data Final da 2ª Prorrogação!');\n    end if;\n  \n    if :new.DT_FINAL3 <= :new.DT_INICIO3\n       or :new.DT_INICIO3 is null\n       or (:new.DT_INICIO3 is not null and :new.DT_FINAL3 is null) then\n    \n      RAISE_APPLICATION_ERROR(-20022,\n                              'Verifique as datas da 3ª Prorrogação do estágio!');\n    end if;\n  \n    BEG_PCK_DESENVOLVEDOR.DIE_PRC_CALCULA_IDADE(:new.DT_FINAL3,\n                                                :new.DT_INICIO3,\n                                                V_ANO,\n                                                V_MES,\n                                                V_DIA);\n    V_MES4 := V_MES + (V_ANO * 12);\n  \n    if V_MES < 6 then\n    \n      RAISE_APPLICATION_ERROR(-20023,\n                              'A Prorrogação deve ter no mínimo 6 meses de duração!');\n    end if;\n  \n  end if;\n\n  V_MES := V_MES1 + V_MES2 + V_MES3 + V_MES4;\n\n  if V_MES > 24 then\n  \n    RAISE_APPLICATION_ERROR(-20024,\n                            'Este contrato ou prorrogação não poderá ser efetivado !!!\n                             Período de estágio superior a 24 meses !!!\n                             Verifique as datas informadas !!!');\n  end if;\n\nend DIE_TRG_BIU_PESSOA_ESTAGIARIO;\n"}`;
    
    }
}
