
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace Models
{
    public class BEG_FIN_CC_MOVIMENTO
    {

        [NotMapped]
        public string Trigger_TRG_BIU_BEG_FIN_CC { get; set; } = `{"triggering_event":"INSERT OR UPDATE","trigger_body":"declare\n  cursor C_CONTA(P_CONTA_ID number) is\n    select AD_CLIENT_ID,\n           AD_ORG_ID\n      from BEG_FIN_CONTA_CORRENTE A\n     where A.BEG_FIN_CONTA_CORRENTE_ID = P_CONTA_ID;\nbegin\n\n  open C_CONTA(:new.BEG_FIN_CONTA_CORRENTE_ID);\n  fetch C_CONTA\n    into :new.AD_CLIENT_ID, :new.AD_ORG_ID;\n  close C_CONTA;\n\n  if :new.HISTORICO is null then\n  \n    :new.HISTORICO := BEG_PCK_CONTA_CORRENTE.FNC_MONTA_HISTORICO(:new.BEG_FIN_CC_HISTORICO_ID,\n                                                                 :new.COMPLEMENTO_HISTORICO_1,\n                                                                 :new.COMPLEMENTO_HISTORICO_2,\n                                                                 :new.COMPLEMENTO_HISTORICO_3,\n                                                                 :new.DOCUMENTO,\n                                                                 :new.HISTORICO);\n  end if;\n  --\n  -- Limpa dados relevantes ao historico\n  --\n\n  if :new.PESSOA_OBRIGATORIA = 'N' then\n    :new.BEG_PESSOA_ID := null;\n  end if;\n\n  if :new.DOCUMENTO_OBRIGATORIO = 'N' then\n    :new.DOCUMENTO                 := null;\n    :new.BEG_FIN_TIPO_DOCUMENTO_ID := null;\n  end if;\n\n  if :new.TITULO_CRC_OBRIGATORIO = 'N' then\n    :new.BEG_CRC_TITULO_ID := null;\n  end if;\n\n  if :new.TITULO_CPG_OBRIGATORIO = 'N' then\n    :new.BEG_CPG_TITULO_ID := null;\n  end if;\n\n  if :new.CAIXA_OBRIGATORIO = 'N' then\n    :new.BEG_FIN_CAIXA_ID := null;\n  end if;\n\n  if :new.FILIAL_ORIGEM_OBRIGATORIA = 'N' then\n    :new.BEG_FILIAL_ID := null;\n  end if;\n\nend;\n"}`;
    
        [NotMapped]
        public string Trigger_TRG_AIUD_BEG_FIN_CC_MOVTO { get; set; } = `{"triggering_event":"INSERT OR UPDATE OR DELETE","trigger_body":"declare\n  VC_MSG_ERRO varchar2(200);\n  REGISTRO    BEG_FIN_CC_MOVIMENTO%rowtype;\nbegin\n  -- Verifica o valor do movimento\n  if not DELETING then\n    if NVL(:new.VLR_MOVIMENTO, 0) <= 0 then\n      VC_MSG_ERRO := 'Valor do movimento deve ser informado e maior que zero!';\n      goto ERRO;\n    end if;\n  end if;\n\n  REGISTRO.BEG_FIN_CC_MOVIMENTO_ID    := :new.BEG_FIN_CC_MOVIMENTO_ID;\n  REGISTRO.BEG_FIN_CONTA_CORRENTE_ID  := :new.BEG_FIN_CONTA_CORRENTE_ID;\n  REGISTRO.AD_CLIENT_ID               := :new.AD_CLIENT_ID;\n  REGISTRO.AD_ORG_ID                  := :new.AD_ORG_ID;\n  REGISTRO.ISACTIVE                   := :new.ISACTIVE;\n  REGISTRO.CREATED                    := :new.CREATED;\n  REGISTRO.CREATEDBY                  := :new.CREATEDBY;\n  REGISTRO.UPDATED                    := :new.UPDATED;\n  REGISTRO.UPDATEDBY                  := :new.UPDATEDBY;\n  REGISTRO.TP_LANCTO                  := :new.TP_LANCTO;\n  REGISTRO.TP_MOVTO                   := :new.TP_MOVTO;\n  REGISTRO.BEG_PESSOA_ID              := :new.BEG_PESSOA_ID;\n  REGISTRO.BEG_FIN_CC_HISTORICO_ID    := :new.BEG_FIN_CC_HISTORICO_ID;\n  REGISTRO.BEG_FIN_CC_CONTA_ID        := :new.BEG_FIN_CC_CONTA_ID;\n  REGISTRO.BEG_FILIAL_ID              := :new.BEG_FILIAL_ID;\n  REGISTRO.COMPLEMENTO_HISTORICO_1    := :new.COMPLEMENTO_HISTORICO_1;\n  REGISTRO.COMPLEMENTO_HISTORICO_2    := :new.COMPLEMENTO_HISTORICO_2;\n  REGISTRO.COMPLEMENTO_HISTORICO_3    := :new.COMPLEMENTO_HISTORICO_3;\n  REGISTRO.HISTORICO                  := :new.HISTORICO;\n  REGISTRO.BEG_CRC_TITULO_ID          := :new.BEG_CRC_TITULO_ID;\n  REGISTRO.BEG_CPG_TITULO_ID          := :new.BEG_CPG_TITULO_ID;\n  REGISTRO.DATA_PREVISTA              := :new.DATA_PREVISTA;\n  REGISTRO.DATA_REALIZADA             := :new.DATA_REALIZADA;\n  REGISTRO.VLR_MOVIMENTO              := :new.VLR_MOVIMENTO;\n  REGISTRO.VLR_BAIXA                  := :new.VLR_BAIXA;\n  REGISTRO.VLR_JUROS                  := :new.VLR_JUROS;\n  REGISTRO.VLR_DESCONTO               := :new.VLR_DESCONTO;\n  REGISTRO.VLR_MULTA                  := :new.VLR_MULTA;\n  REGISTRO.FECHADO                    := :new.FECHADO;\n  REGISTRO.PESSOA_OBRIGATORIA         := :new.PESSOA_OBRIGATORIA;\n  REGISTRO.TITULO_CRC_OBRIGATORIO     := :new.TITULO_CRC_OBRIGATORIO;\n  REGISTRO.TITULO_CPG_OBRIGATORIO     := :new.TITULO_CPG_OBRIGATORIO;\n  REGISTRO.CONTA_CORRENTE_OBRIGATORIA := :new.CONTA_CORRENTE_OBRIGATORIA;\n  REGISTRO.FILIAL_ORIGEM_OBRIGATORIA  := :new.FILIAL_ORIGEM_OBRIGATORIA;\n  REGISTRO.BEG_FIN_CONTA_CORRENTE_ID  := :new.BEG_FIN_CONTA_CORRENTE_ID;\n  REGISTRO.BEG_FIN_TIPO_DOCUMENTO_ID  := :new.BEG_FIN_TIPO_DOCUMENTO_ID;\n  REGISTRO.DOCUMENTO_OBRIGATORIO      := :new.DOCUMENTO_OBRIGATORIO;\n  REGISTRO.DOCUMENTO                  := :new.DOCUMENTO;\n\n  BEG_PCK_CONTA_CORRENTE.REG_NEW := REGISTRO;\n\n  REGISTRO.BEG_FIN_CC_MOVIMENTO_ID    := :old.BEG_FIN_CC_MOVIMENTO_ID;\n  REGISTRO.BEG_FIN_CONTA_CORRENTE_ID  := :old.BEG_FIN_CONTA_CORRENTE_ID;\n  REGISTRO.AD_CLIENT_ID               := :old.AD_CLIENT_ID;\n  REGISTRO.AD_ORG_ID                  := :old.AD_ORG_ID;\n  REGISTRO.ISACTIVE                   := :new.ISACTIVE;\n  REGISTRO.CREATED                    := :new.CREATED;\n  REGISTRO.CREATEDBY                  := :old.CREATEDBY;\n  REGISTRO.UPDATED                    := :old.UPDATED;\n  REGISTRO.UPDATEDBY                  := :old.UPDATEDBY;\n  REGISTRO.TP_LANCTO                  := :old.TP_LANCTO;\n  REGISTRO.TP_MOVTO                   := :old.TP_MOVTO;\n  REGISTRO.BEG_PESSOA_ID              := :old.BEG_PESSOA_ID;\n  REGISTRO.BEG_FIN_CC_HISTORICO_ID    := :old.BEG_FIN_CC_HISTORICO_ID;\n  REGISTRO.BEG_FIN_CC_CONTA_ID        := :old.BEG_FIN_CC_CONTA_ID;\n  REGISTRO.BEG_FILIAL_ID              := :old.BEG_FILIAL_ID;\n  REGISTRO.COMPLEMENTO_HISTORICO_1    := :old.COMPLEMENTO_HISTORICO_1;\n  REGISTRO.COMPLEMENTO_HISTORICO_2    := :old.COMPLEMENTO_HISTORICO_2;\n  REGISTRO.COMPLEMENTO_HISTORICO_3    := :old.COMPLEMENTO_HISTORICO_3;\n  REGISTRO.HISTORICO                  := :old.HISTORICO;\n  REGISTRO.BEG_CRC_TITULO_ID          := :old.BEG_CRC_TITULO_ID;\n  REGISTRO.BEG_CPG_TITULO_ID          := :old.BEG_CPG_TITULO_ID;\n  REGISTRO.DATA_PREVISTA              := :old.DATA_PREVISTA;\n  REGISTRO.DATA_REALIZADA             := :old.DATA_REALIZADA;\n  REGISTRO.VLR_MOVIMENTO              := :old.VLR_MOVIMENTO;\n  REGISTRO.VLR_BAIXA                  := :old.VLR_BAIXA;\n  REGISTRO.VLR_JUROS                  := :old.VLR_JUROS;\n  REGISTRO.VLR_DESCONTO               := :old.VLR_DESCONTO;\n  REGISTRO.VLR_MULTA                  := :old.VLR_MULTA;\n  REGISTRO.FECHADO                    := :old.FECHADO;\n  REGISTRO.PESSOA_OBRIGATORIA         := :old.PESSOA_OBRIGATORIA;\n  REGISTRO.TITULO_CRC_OBRIGATORIO     := :old.TITULO_CRC_OBRIGATORIO;\n  REGISTRO.TITULO_CPG_OBRIGATORIO     := :old.TITULO_CPG_OBRIGATORIO;\n  REGISTRO.CONTA_CORRENTE_OBRIGATORIA := :old.CONTA_CORRENTE_OBRIGATORIA;\n  REGISTRO.FILIAL_ORIGEM_OBRIGATORIA  := :old.FILIAL_ORIGEM_OBRIGATORIA;\n  REGISTRO.BEG_FIN_CONTA_CORRENTE_ID  := :old.BEG_FIN_CONTA_CORRENTE_ID;\n  REGISTRO.BEG_FIN_TIPO_DOCUMENTO_ID  := :old.BEG_FIN_TIPO_DOCUMENTO_ID;\n  REGISTRO.DOCUMENTO_OBRIGATORIO      := :old.DOCUMENTO_OBRIGATORIO;\n  REGISTRO.DOCUMENTO                  := :old.DOCUMENTO;\n\n  BEG_PCK_CONTA_CORRENTE.REG_OLD := REGISTRO;\n\n  BEG_PCK_CONTA_CORRENTE.PRC_VALIDA_MOVIMENTO;\n\n  if INSERTING then\n    BEG_PCK_CONTA_CORRENTE.PRC_SALDO('I');\n  elsif UPDATING then\n    BEG_PCK_CONTA_CORRENTE.PRC_SALDO('U');\n  else\n    BEG_PCK_CONTA_CORRENTE.PRC_SALDO('D');\n  end if;\n\n  goto FIM;\n\n  <<ERRO>>\n  RAISE_APPLICATION_ERROR(-20001, VC_MSG_ERRO);\n\n  <<FIM>>\n  return;\n\nend TRG_AIUD_BEG_FIN_CAIXA_MOVTO;\n"}`;
    
    }
}
